[gd_scene load_steps=26 format=3 uid="uid://cr6l1emnn2s2i"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jvwcf"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tjgje"]
albedo_color = Color(0, 0.36263254, 0.18690765, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_4yait"]
material = SubResource("StandardMaterial3D_tjgje")

[sub_resource type="SphereMesh" id="SphereMesh_tjgje"]
radius = 0.1
height = 0.2

[sub_resource type="Animation" id="Animation_jvwcf"]
resource_name = "punch"
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D/hand_r:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.033333335, 0.06666667, 0.1, 0.13333334, 0.16666667, 0.2, 0.22413917, 0.25780815, 0.29628697, 0.33091792),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.356666, 0.08806366, 0.7028187), Vector3(-0.356666, 0.08806366, 0.7028187), Vector3(-0.356666, 0.17977017, 0.7855746), Vector3(-0.356666, 0.17977017, 0.8978155), Vector3(-0.356666, 0.17977017, 1.0363936), Vector3(-0.356666, 0.17977017, 1.1642528), Vector3(-0.356666, 0.17977017, 1.0363936), Vector3(-0.356666, 0.17977017, 0.8978155), Vector3(-0.356666, 0.17977017, 0.8978155), Vector3(-0.356666, 0.17977017, 0.7855746), Vector3(-0.356666, 0.08806366, 0.7028187)]
}

[sub_resource type="Animation" id="Animation_tjgje"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D/hand_r:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.356666, 0.08806366, 0.7028187)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MeshInstance3D/hand_l:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.3825637, 0.08806366, 0.7028187)]
}

[sub_resource type="Animation" id="Animation_4yait"]
resource_name = "idle"
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D/hand_r:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.13333334, 0.26666668, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.356666, 0.08806366, 0.7028187), Vector3(-0.356666, 0.04175204, 0.7028187), Vector3(-0.356666, -0.04139805, 0.7028187), Vector3(-0.356666, 0.04175204, 0.7028187), Vector3(-0.356666, 0.08806366, 0.7028187)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MeshInstance3D/hand_l:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.13333334, 0.26666668, 0.40000004, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.3825637, 0.08806366, 0.7028187), Vector3(0.3825637, 0.11727786, 0.7028187), Vector3(0.3825637, 0.15159142, 0.7028187), Vector3(0.3825637, 0.11727786, 0.7028187), Vector3(0.3825637, 0.08806366, 0.7028187)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4yait"]
_data = {
&"RESET": SubResource("Animation_tjgje"),
&"idle": SubResource("Animation_4yait"),
&"punch": SubResource("Animation_jvwcf")
}

[sub_resource type="BlackboardPlan" id="BlackboardPlan_tjgje"]

[sub_resource type="BTFail" id="BTFail_4yait"]

[sub_resource type="BTSequence" id="BTSequence_q3g0h"]
children = [SubResource("BTFail_4yait")]

[sub_resource type="BBNode" id="BBNode_jvwcf"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_tjgje"]
animation_player = SubResource("BBNode_jvwcf")
animation_name = &"punch"

[sub_resource type="BTProbability" id="BTProbability_jvwcf"]
children = [SubResource("BTPlayAnimation_tjgje")]

[sub_resource type="BTRandomWait" id="BTRandomWait_jvwcf"]
min_duration = 0.5
max_duration = 1.0

[sub_resource type="BBNode" id="BBNode_tjgje"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_4yait"]
animation_player = SubResource("BBNode_tjgje")
animation_name = &"idle"

[sub_resource type="BBNode" id="BBNode_4yait"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTAwaitAnimation" id="BTAwaitAnimation_q3g0h"]
animation_player = SubResource("BBNode_4yait")
animation_name = &"idle"

[sub_resource type="BTWait" id="BTWait_jvwcf"]

[sub_resource type="BTSequence" id="BTSequence_jvwcf"]
children = [SubResource("BTProbability_jvwcf"), SubResource("BTRandomWait_jvwcf"), SubResource("BTPlayAnimation_4yait"), SubResource("BTAwaitAnimation_q3g0h"), SubResource("BTWait_jvwcf")]

[sub_resource type="BTSelector" id="BTSelector_yyaat"]
children = [SubResource("BTSequence_jvwcf")]

[sub_resource type="BTSelector" id="BTSelector_u21pb"]
children = [SubResource("BTSequence_q3g0h"), SubResource("BTSelector_yyaat")]

[sub_resource type="BehaviorTree" id="BehaviorTree_vho8j"]
blackboard_plan = SubResource("BlackboardPlan_tjgje")
root_task = SubResource("BTSelector_u21pb")

[sub_resource type="BlackboardPlan" id="BlackboardPlan_jvwcf"]

[node name="goblin" type="CharacterBody3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_jvwcf")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("CapsuleMesh_4yait")

[node name="hand_r" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.356666, 0.08806366, 0.7028187)
mesh = SubResource("SphereMesh_tjgje")
skeleton = NodePath("../..")

[node name="hand_l" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3825637, 0.08806366, 0.7028187)
mesh = SubResource("SphereMesh_tjgje")
skeleton = NodePath("../..")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_4yait")
}

[node name="BTPlayer" type="BTPlayer" parent="."]
behavior_tree = SubResource("BehaviorTree_vho8j")
blackboard_plan = SubResource("BlackboardPlan_jvwcf")
